{"remainingRequest":"/Volumes/data/1902/vue1/vue1/myapp1/node_modules/babel-loader/lib/index.js!/Volumes/data/1902/vue1/vue1/myapp1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/data/1902/vue1/vue1/myapp1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/data/1902/vue1/vue1/myapp1/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/data/1902/vue1/vue1/myapp1/src/views/Register.vue","mtime":1559223917621},{"path":"/Volumes/data/1902/vue1/vue1/myapp1/node_modules/cache-loader/dist/cjs.js","mtime":1558966544429},{"path":"/Volumes/data/1902/vue1/vue1/myapp1/node_modules/babel-loader/lib/index.js","mtime":1558966544148},{"path":"/Volumes/data/1902/vue1/vue1/myapp1/node_modules/cache-loader/dist/cjs.js","mtime":1558966544429},{"path":"/Volumes/data/1902/vue1/vue1/myapp1/node_modules/vue-loader/lib/index.js","mtime":1558966550778}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport Vue from 'vue';\nimport { Toast } from 'vant';\nVue.use(Toast);\nexport default {\n  data: function data() {\n    return {\n      username: '',\n      password: '',\n      sms: '',\n      code: '',\n      num: 60,\n      flag: true\n    };\n  },\n  computed: {\n    userReg: function userReg() {\n      if (this.username === '') {\n        return '请输入11位手机号';\n      } else if (!/^1[345678]\\d{9}$/.test(this.username)) {\n        return '手机号格式错误';\n      } else {\n        return '';\n      }\n    },\n    passReg: function passReg() {\n      if (this.password === '') {\n        return '请输入6～20位数字或字符密码';\n      } else if (!/^(\\w){6,20}$/.test(this.password)) {\n        return '密码格式错误';\n      } else {\n        return '';\n      }\n    },\n    smsReg: function smsReg() {\n      console.log(this.sms, this.code);\n\n      if (this.sms === '') {\n        return '请输入手机验证码';\n      } else if (this.code === this.sms) {\n        return '';\n      } else {\n        return '验证码错误';\n      }\n    }\n  },\n  methods: {\n    close: function close() {\n      this.$router.go(-1);\n    },\n    register: function register() {\n      var _this = this;\n\n      if (this.userReg === '' && this.passReg === '' && this.smsReg === '') {\n        axios.post('http://www.daxunxun.com/users/register', {\n          username: this.username,\n          password: this.password\n        }).then(function (res) {\n          console.log(res);\n\n          if (res.data === 0) {\n            Toast('注册失败，请后再次尝试');\n          } else if (res.data === 1) {\n            localStorage.setItem('isLogin', 'ok');\n\n            _this.$router.push('/home');\n          } else {\n            Toast('用户名已被注册');\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else {\n        Toast('信息有误，请按规范重新提交');\n      }\n    },\n    sendCode: function sendCode() {\n      var _this2 = this;\n\n      this.flag = false;\n      this.timer = setInterval(function () {\n        _this2.num--;\n\n        if (_this2.num === 0) {\n          _this2.flag = true;\n          _this2.num = 60;\n          clearInterval(_this2.timer);\n        }\n      }, 1000);\n      axios.get(\"http://www.daxunxun.com/users/sendCode?tel=\".concat(this.username)).then(function (res) {\n        console.log(res);\n        _this2.code = res.data.code;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }\n};",{"version":3,"sources":["Register.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"register\">\n    <van-nav-bar\n      title=\"注册\"\n      left-arrow\n      @click-left=\"close\"\n    />\n   <van-cell-group>\n      <van-field\n        v-model=\"username\"\n        required\n        clearable\n        label=\"用户名\"\n        right-icon=\"question-o\"\n        placeholder=\"请输入用户名\"\n        :error-message=\"userReg\"\n        @click-right-icon=\"$toast('question')\"\n      />\n      <van-field\n        v-model=\"sms\"\n        center\n        required\n        clearable\n        label=\"短信验证码\"\n        :error-message=\"smsReg\"\n        placeholder=\"请输入短信验证码\"\n      >\n        <van-button slot=\"button\" v-if='flag'   @click='sendCode' size=\"small\" type=\"primary\">发送验证码</van-button>\n        <van-button slot=\"button\" v-else disabled size=\"small\" type=\"warning\">{{ num }}s后再发送</van-button>\n      </van-field>\n      <van-field\n        v-model=\"password\"\n        type=\"password\"\n        label=\"密码\"\n         right-icon=\"question-o\"\n        placeholder=\"请输入密码\"\n        :error-message=\"passReg\"\n        required\n      />\n    </van-cell-group>\n    <van-button size='large'  @click='register' type=\"danger\">注册</van-button>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Vue from 'vue'\nimport { Toast } from 'vant'\nVue.use(Toast)\nexport default {\n  data () {\n    return {\n      username: '',\n      password: '',\n      sms: '',\n      code: '',\n      num: 60,\n      flag: true\n    }\n  },\n  computed: {\n    userReg () {\n      if (this.username === '') {\n        return '请输入11位手机号'\n      } else if (!(/^1[345678]\\d{9}$/.test(this.username))) {\n        return '手机号格式错误'\n      } else {\n        return ''\n      }\n    },\n    passReg () {\n      if (this.password === '') {\n        return '请输入6～20位数字或字符密码'\n      } else if (!(/^(\\w){6,20}$/.test(this.password))) {\n        return '密码格式错误'\n      } else {\n        return ''\n      }\n    },\n    smsReg () {\n      console.log(this.sms, this.code)\n      if (this.sms === '') {\n        return '请输入手机验证码'\n      } else if (this.code === this.sms) {\n        return ''\n      } else {\n        return '验证码错误'\n      }\n    }\n  },\n  methods: {\n    close () {\n      this.$router.go(-1)\n    },\n    register () {\n      if (this.userReg === '' && this.passReg === '' && this.smsReg === '') {\n        axios.post('http://www.daxunxun.com/users/register', {\n          username: this.username,\n          password: this.password\n        }).then(res => {\n          console.log(res)\n          if (res.data === 0) {\n            Toast('注册失败，请后再次尝试')\n          } else if (res.data === 1) {\n            localStorage.setItem('isLogin', 'ok')\n            this.$router.push('/home')\n          } else {\n            Toast('用户名已被注册')\n          }\n        }).catch(err => {\n          console.log(err)\n        })\n      } else {\n        Toast('信息有误，请按规范重新提交')\n      }\n    },\n    sendCode () {\n      this.flag = false\n      this.timer = setInterval(() => {\n        this.num--\n        if (this.num === 0) {\n          this.flag = true\n          this.num = 60\n          clearInterval(this.timer)\n        }\n      }, 1000)\n      axios.get(`http://www.daxunxun.com/users/sendCode?tel=${this.username}`)\n        .then(res => {\n          console.log(res)\n          this.code = res.data.code\n        }).catch(err => {\n          console.log(err)\n        })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views"}]}